<!DOCTYPE html>  <html> <head>   <title>run.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               run.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>Main execution file for unit tests.</p>

<p><em>(c) 2012 Aaron Zampaglione <a href="m&#x61;&#105;&#108;&#116;&#x6F;:&#97;&#122;&#x61;&#109;&#x70;&#97;gl&#x40;&#x61;&#x7A;&#x61;&#x6D;p&#x61;&#103;&#108;&#46;&#x63;&#x6F;&#109;">&#97;&#122;&#x61;&#109;&#x70;&#97;gl&#x40;&#x61;&#x7A;&#x61;&#x6D;p&#x61;&#103;&#108;&#46;&#x63;&#x6F;&#109;</a></em></p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">chai = </span><span class="nx">require</span><span class="p">(</span><span class="s">&#39;chai&#39;</span><span class="p">)</span>
<span class="nv">fs = </span><span class="nx">require</span><span class="p">(</span><span class="s">&#39;fs&#39;</span><span class="p">)</span>
<span class="nv">path = </span><span class="nx">require</span><span class="p">(</span><span class="s">&#39;path&#39;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Create a new instance of mocha (BDD by default).</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">mocha = </span><span class="k">new</span> <span class="p">(</span><span class="nx">require</span><span class="p">(</span><span class="s">&#39;mocha&#39;</span><span class="p">))</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Export Chai globally to our tests.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">assert = </span><span class="nx">chai</span><span class="p">.</span><span class="nx">assert</span>
<span class="nv">should = </span><span class="nx">chai</span><span class="p">.</span><span class="nx">should</span><span class="p">()</span>
<span class="nv">expect = </span><span class="nx">chai</span><span class="p">.</span><span class="nx">expect</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Turn off global leaks for requirejsVars.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">mocha</span><span class="p">.</span><span class="nx">globals</span><span class="p">([</span><span class="s">&#39;requirejsVars&#39;</span><span class="p">]);</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>tests = [path.resolve(__dirname + '/test')]
while tests.length
 test = tests.pop()</p>

<p># Continue if directory.
 if fs.statSync(test).isDirectory()
   tests = tests.concat(fs.readdirSync(test).map((file) -> path.resolve(test + '/' + file)))
   continue</p>

<p>((test) ->
   mocha.addFile(test)
 )(test)</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">mocha</span><span class="p">.</span><span class="nx">addFile</span><span class="p">(</span><span class="s">&#39;test/app&#39;</span><span class="p">)</span>
<span class="nx">mocha</span><span class="p">.</span><span class="nx">addFile</span><span class="p">(</span><span class="s">&#39;test/routes/foo&#39;</span><span class="p">)</span>
<span class="nx">mocha</span><span class="p">.</span><span class="nx">run</span><span class="p">()</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 